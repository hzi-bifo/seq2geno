Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	aln_to_vcf
	1	compute_gpa_raw_table
	1	create_indel_table
	4	duplicate_gffs
	1	sort_gene_family
	1	vcf_to_indels
	10

rule duplicate_gffs:
    input: tmp/CH2500/spades/prokka/de_novo.gff
    output: tmp/CH2500/spades/prokka/CH2500.gff
    jobid: 7
    wildcards: TMP_D=tmp, strain=CH2500, assembler=spades, annotator=prokka

Finished job 7.
1 of 10 steps (10%) done

rule duplicate_gffs:
    input: tmp/F1659/spades/prokka/de_novo.gff
    output: tmp/F1659/spades/prokka/F1659.gff
    jobid: 6
    wildcards: TMP_D=tmp, strain=F1659, assembler=spades, annotator=prokka

Finished job 6.
2 of 10 steps (20%) done

rule duplicate_gffs:
    input: tmp/CH2522/spades/prokka/de_novo.gff
    output: tmp/CH2522/spades/prokka/CH2522.gff
    jobid: 5
    wildcards: TMP_D=tmp, strain=CH2522, assembler=spades, annotator=prokka

Finished job 5.
3 of 10 steps (30%) done

rule duplicate_gffs:
    input: tmp/CH2502/spades/prokka/de_novo.gff
    output: tmp/CH2502/spades/prokka/CH2502.gff
    jobid: 4
    wildcards: TMP_D=tmp, strain=CH2502, assembler=spades, annotator=prokka

Finished job 4.
4 of 10 steps (40%) done

rule compute_gpa_raw_table:
    input: tmp/CH2500/spades/prokka/CH2500.gff, tmp/CH2502/spades/prokka/CH2502.gff, tmp/CH2522/spades/prokka/CH2522.gff, tmp/F1659/spades/prokka/F1659.gff
    output: tmp/roary/gene_presence_absence.csv, tmp/roary/gene_presence_absence.Rtab
    jobid: 2
    wildcards: TMP_D=tmp, gene_sorter=roary

Removing temporary output file tmp/CH2502/spades/prokka/CH2502.gff.
Removing temporary output file tmp/CH2522/spades/prokka/CH2522.gff.
Removing temporary output file tmp/F1659/spades/prokka/F1659.gff.
Removing temporary output file tmp/CH2500/spades/prokka/CH2500.gff.
Finished job 2.
5 of 10 steps (50%) done

rule sort_gene_family:
    input: tmp/roary/gene_presence_absence.csv, tmp/CH2500/spades/prokka/de_novo.ffn, tmp/CH2502/spades/prokka/de_novo.ffn, tmp/CH2522/spades/prokka/de_novo.ffn, tmp/F1659/spades/prokka/de_novo.ffn
    output: tmp/aln.list
    jobid: 13
    wildcards: TMP_D=tmp

Finished job 13.
6 of 10 steps (60%) done

rule aln_to_vcf:
    input: tmp/aln.list
    output: tmp/aln_vcf.list
    jobid: 8
    wildcards: TMP_D=tmp

Finished job 8.
7 of 10 steps (70%) done

rule vcf_to_indels:
    input: tmp/aln_vcf.list
    output: tmp/indel.list
    jobid: 3
    wildcards: TMP_D=tmp

Finished job 3.
8 of 10 steps (80%) done

rule create_indel_table:
    input: tmp/roary/gene_presence_absence.Rtab, tmp/indel.list
    output: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/results/annot.tab, indel_annot.txt, indels_stats.txt, roary_PA14_abricate.txt
    jobid: 1

    Error in rule create_indel_table:
        jobid: 1
        output: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/results/annot.tab, indel_annot.txt, indels_stats.txt, roary_PA14_abricate.txt

RuleException:
CalledProcessError in line 114 of /net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/CREATE_INDEL_TABLE.smk:
Command ' set -euo pipefail;  
        source activate py27
        python indel_detection/generate_indel_features.py         <(cut -f1 tmp/roary/gene_presence_absence.Rtab| tail -n+2 )         /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/results/annot.tab indel_annot.txt         indels_stats.txt roary_PA14_abricate.txt 
        source deactivate ' returned non-zero exit status 1.
  File "/net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/CREATE_INDEL_TABLE.smk", line 114, in __rule_create_indel_table
  File "/home/thkuo/miniconda3/envs/phypal/lib/python3.6/concurrent/futures/thread.py", line 55, in run
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/.snakemake/log/2018-08-07T155706.384000.snakemake.log
