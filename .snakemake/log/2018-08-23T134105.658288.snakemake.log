Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	4	convert_to_sin
	1	create_and_make_expr_table
	4	for_expr_stampy_remapping
	4	gene_counts
	4	rna_mapping_bwa
	4	rna_sam2bam
	1	write_dict_file
	23

[Thu Aug 23 13:41:07 2018]
rule rna_mapping_bwa:
    input: data/strains/rna/F1659.fastq.gz, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/data/reference/RefCln_UCBPP-PA14.fa, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/data/reference/RefCln_UCBPP-PA14.fa.stidx, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/data/reference/RefCln_UCBPP-PA14.fa.sthash, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/data/reference/RefCln_UCBPP-PA14.fa.bwt, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/data/reference/RefCln_UCBPP-PA14.fa.fai
    output: tmp/F1659/bwa/rna.sai, tmp/F1659/bwa/rna.bam
    jobid: 54
    wildcards: TMP_D=tmp, strain=F1659

[Thu Aug 23 13:43:50 2018]
Finished job 54.
1 of 23 steps (4%) done

[Thu Aug 23 13:43:50 2018]
rule for_expr_stampy_remapping:
    input: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/data/reference/RefCln_UCBPP-PA14.fa.stidx, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/data/reference/RefCln_UCBPP-PA14.fa.sthash, tmp/F1659/bwa/rna.bam
    output: tmp/F1659/stampy/rna.sam
    jobid: 42
    wildcards: TMP_D=tmp, strain=F1659

[Thu Aug 23 14:03:38 2018]
Finished job 42.
2 of 23 steps (9%) done

[Thu Aug 23 14:03:38 2018]
rule rna_sam2bam:
    input: tmp/F1659/stampy/rna.sam
    output: tmp/F1659/rna_sorted.bam, tmp/F1659/rna_sorted.rmdup.sam, tmp/F1659/rna_sorted.rmdup.bam
    jobid: 29
    wildcards: TMP_D=tmp, strain=F1659

    [Thu Aug 23 14:03:39 2018]
    Error in rule rna_sam2bam:
        jobid: 29
        output: tmp/F1659/rna_sorted.bam, tmp/F1659/rna_sorted.rmdup.sam, tmp/F1659/rna_sorted.rmdup.bam

RuleException:
CalledProcessError in line 54 of /net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/CREATE_EXPR_TABLE.smk:
Command ' set -euo pipefail;  
        source activate Ariane_dna
        samtools view -bS tmp/F1659/stampy/rna.sam |        samtools sort > tmp/F1659/rna_sorted.bam
        samtools rmdup -s tmp/F1659/rna_sorted.bam tmp/F1659/rna_sorted.rmdup.bam
        samtools view -h tmp/F1659/rna_sorted.rmdup.bam > tmp/F1659/rna_sorted.rmdup.sam 
        source deactivate ' returned non-zero exit status 1.
  File "/net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/CREATE_EXPR_TABLE.smk", line 54, in __rule_rna_sam2bam
  File "/home/thkuo/miniconda3/envs/seq2geno/lib/python3.6/concurrent/futures/thread.py", line 56, in run
Removing output files of failed job rna_sam2bam since they might be corrupted:
tmp/F1659/rna_sorted.bam
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v5/.snakemake/log/2018-08-23T134105.658288.snakemake.log
