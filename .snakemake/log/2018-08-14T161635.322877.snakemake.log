Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	create_coding_regions_aln
	4	create_consensus_sequence
	4	create_vcf
	1	find_best_tree
	3	paired_mapping
	1	postprocess_alignment
	3	sort_bam
	18

[Tue Aug 14 16:16:40 2018]
rule create_vcf:
    input: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.fai, tmp/F1659/bwa/sorted.bam, tmp/F1659/bwa/sorted.bam.bai
    output: tmp/F1659/bwa/vcf.gz, tmp/F1659/bwa/vcf.gz.tbi
    jobid: 30
    wildcards: TMP_D=tmp, strain=F1659, mapper=bwa

Removing temporary output file tmp/F1659/bwa/sorted.bam.bai.
Removing temporary output file tmp/F1659/bwa/sorted.bam.
Removing temporary output file tmp/F1659/bwa/vcf.gz.tbi.
[Tue Aug 14 16:17:20 2018]
Finished job 30.
1 of 18 steps (6%) done

[Tue Aug 14 16:17:20 2018]
rule paired_mapping:
    input: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa, data/strains/dna/CH2500_1.fq.gz, data/strains/dna/CH2500_2.fq.gz, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.bwt
    output: tmp/CH2500/bwa/paired.bam
    jobid: 39
    wildcards: TMP_D=tmp, strain=CH2500, mapper=bwa

[Tue Aug 14 16:17:34 2018]
Finished job 39.
2 of 18 steps (11%) done

[Tue Aug 14 16:17:34 2018]
rule sort_bam:
    input: tmp/CH2500/bwa/paired.bam
    output: tmp/CH2500/bwa/sorted.bam, tmp/CH2500/bwa/sorted.bam.bai
    jobid: 35
    wildcards: TMP_D=tmp, strain=CH2500, mapper=bwa

Removing temporary output file tmp/CH2500/bwa/paired.bam.
[Tue Aug 14 16:18:42 2018]
Finished job 35.
3 of 18 steps (17%) done

[Tue Aug 14 16:18:42 2018]
rule create_vcf:
    input: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.fai, tmp/CH2500/bwa/sorted.bam, tmp/CH2500/bwa/sorted.bam.bai
    output: tmp/CH2500/bwa/vcf.gz, tmp/CH2500/bwa/vcf.gz.tbi
    jobid: 29
    wildcards: TMP_D=tmp, strain=CH2500, mapper=bwa

Removing temporary output file tmp/CH2500/bwa/sorted.bam.
Removing temporary output file tmp/CH2500/bwa/sorted.bam.bai.
Removing temporary output file tmp/CH2500/bwa/vcf.gz.tbi.
[Tue Aug 14 16:19:03 2018]
Finished job 29.
4 of 18 steps (22%) done

[Tue Aug 14 16:19:03 2018]
rule paired_mapping:
    input: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa, data/strains/dna/CH2522_1.fq.gz, data/strains/dna/CH2522_2.fq.gz, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.bwt
    output: tmp/CH2522/bwa/paired.bam
    jobid: 37
    wildcards: TMP_D=tmp, strain=CH2522, mapper=bwa

[Tue Aug 14 16:19:20 2018]
Finished job 37.
5 of 18 steps (28%) done

[Tue Aug 14 16:19:20 2018]
rule sort_bam:
    input: tmp/CH2522/bwa/paired.bam
    output: tmp/CH2522/bwa/sorted.bam, tmp/CH2522/bwa/sorted.bam.bai
    jobid: 32
    wildcards: TMP_D=tmp, strain=CH2522, mapper=bwa

Removing temporary output file tmp/CH2522/bwa/paired.bam.
[Tue Aug 14 16:20:26 2018]
Finished job 32.
6 of 18 steps (33%) done

[Tue Aug 14 16:20:26 2018]
rule create_vcf:
    input: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.fai, tmp/CH2522/bwa/sorted.bam, tmp/CH2522/bwa/sorted.bam.bai
    output: tmp/CH2522/bwa/vcf.gz, tmp/CH2522/bwa/vcf.gz.tbi
    jobid: 27
    wildcards: TMP_D=tmp, strain=CH2522, mapper=bwa

Removing temporary output file tmp/CH2522/bwa/sorted.bam.bai.
Removing temporary output file tmp/CH2522/bwa/sorted.bam.
Removing temporary output file tmp/CH2522/bwa/vcf.gz.tbi.
[Tue Aug 14 16:21:05 2018]
Finished job 27.
7 of 18 steps (39%) done

[Tue Aug 14 16:21:05 2018]
rule paired_mapping:
    input: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa, data/strains/dna/CH2502_1.fq.gz, data/strains/dna/CH2502_2.fq.gz, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.bwt
    output: tmp/CH2502/bwa/paired.bam
    jobid: 38
    wildcards: TMP_D=tmp, strain=CH2502, mapper=bwa

Removing temporary output file /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.bwt.
[Tue Aug 14 16:21:20 2018]
Finished job 38.
8 of 18 steps (44%) done

[Tue Aug 14 16:21:20 2018]
rule sort_bam:
    input: tmp/CH2502/bwa/paired.bam
    output: tmp/CH2502/bwa/sorted.bam, tmp/CH2502/bwa/sorted.bam.bai
    jobid: 34
    wildcards: TMP_D=tmp, strain=CH2502, mapper=bwa

Removing temporary output file tmp/CH2502/bwa/paired.bam.
[Tue Aug 14 16:22:22 2018]
Finished job 34.
9 of 18 steps (50%) done

[Tue Aug 14 16:22:22 2018]
rule create_vcf:
    input: /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa, /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.fai, tmp/CH2502/bwa/sorted.bam, tmp/CH2502/bwa/sorted.bam.bai
    output: tmp/CH2502/bwa/vcf.gz, tmp/CH2502/bwa/vcf.gz.tbi
    jobid: 28
    wildcards: TMP_D=tmp, strain=CH2502, mapper=bwa

Removing temporary output file tmp/CH2502/bwa/sorted.bam.
Removing temporary output file tmp/CH2502/bwa/sorted.bam.bai.
Removing temporary output file /net/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/data/reference/RefCln_UCBPP-PA14.fa.fai.
Removing temporary output file tmp/CH2502/bwa/vcf.gz.tbi.
[Tue Aug 14 16:22:53 2018]
Finished job 28.
10 of 18 steps (56%) done

[Tue Aug 14 16:22:53 2018]
rule create_consensus_sequence:
    input: tmp/reference.target_regions.fa, tmp/CH2522/bwa/vcf.gz
    output: tmp/CH2522/bwa/cons.fa
    jobid: 17
    wildcards: TMP_D=tmp, strains=CH2522, mapper=bwa

    [Tue Aug 14 16:22:53 2018]
    Error in rule create_consensus_sequence:
        jobid: 17
        output: tmp/CH2522/bwa/cons.fa

RuleException:
CalledProcessError in line 9 of /net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/MAKE_CONS.smk:
Command ' set -euo pipefail;  bcftools consensus -f tmp/reference.target_regions.fa tmp/CH2522/bwa/vcf.gz > tmp/CH2522/bwa/cons.fa ' returned non-zero exit status 255.
  File "/net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/MAKE_CONS.smk", line 9, in __rule_create_consensus_sequence
  File "/home/thkuo/miniconda3/envs/seq2geno/lib/python3.6/concurrent/futures/thread.py", line 56, in run
Removing output files of failed job create_consensus_sequence since they might be corrupted:
tmp/CH2522/bwa/cons.fa
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /net/sgi/metagenomics/data/from_moni/old.tzuhao/seq2geno/dev_versions/v4/.snakemake/log/2018-08-14T161635.322877.snakemake.log
